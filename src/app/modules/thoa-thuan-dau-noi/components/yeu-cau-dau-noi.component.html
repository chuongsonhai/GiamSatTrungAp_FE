<ng-container *ngIf="isLoadingForm$ | async; else showData">
  <div class="overlay-layer bg-transparent">
      <div class="spinner spinner-lg spinner-success"><span style="padding-left:35px;">Đang tải dữ liệu, vui lòng chờ</span></div>
  </div>
</ng-container>
<ng-template #showData>
  <div class="card card-custom gutter-b">
    <div class="card-header">
      <div class="card-title">
        <ul class="nav nav-tabs" id="myTab" role="tablist">
          <li class="nav-item" (click)="changeTab(tabs.TiepNhanHoSo)"
            [class.active]="activeTabId === tabs.TiepNhanHoSo">
            <a class="nav-link" data-toggle="tab" role="button" [attr.aria-selected]="activeTabId === tabs.TiepNhanHoSo"
              [class.active]="activeTabId === tabs.TiepNhanHoSo">
              <span class="menu-text">1) Tiếp nhận hồ sơ</span>
            </a>
          </li>

          <li class="nav-item" (click)="changeTab(tabs.KhaoSatHienTruong)"
            [class.active]="activeTabId === tabs.KhaoSatHienTruong">
            <a class="nav-link" data-toggle="tab" role="button"
              [attr.aria-selected]="activeTabId === tabs.KhaoSatHienTruong"
              [class.active]="activeTabId === tabs.KhaoSatHienTruong">
              <span class="menu-text">2) Khảo sát hiện trường</span>
            </a>
          </li>

          <li class="nav-item" (click)="changeTab(tabs.DuThaoThoaThuan)"
            [class.active]="activeTabId === tabs.DuThaoThoaThuan">
            <a class="nav-link" data-toggle="tab" role="button"
              [attr.aria-selected]="activeTabId === tabs.DuThaoThoaThuan"
              [class.active]="activeTabId === tabs.DuThaoThoaThuan">

              <span class="menu-text">3) Thỏa thuận đấu nối</span>
            </a>
          </li>          
          <li class="nav-item" (click)="changeTab(tabs.ChuyenTiep)" [class.active]="activeTabId === tabs.ChuyenTiep">
            <a class="nav-link" data-toggle="tab" role="button" [attr.aria-selected]="activeTabId === tabs.ChuyenTiep"
              [class.active]="activeTabId === tabs.ChuyenTiep">
              <span class="menu-text">4) Hoàn thành</span>
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="card-body">
      <div class="col-xl-12 col-xxl-12">
        <div class="tab-content mt-5" id="myTabContent">
          <ng-container *ngIf="activeTabId === tabs.TiepNhanHoSo && congVanYeuCau">
            <app-tiep-nhan-ho-so [congVanYeuCau]="congVanYeuCau" (reloadForm)="reloadForm($event)"></app-tiep-nhan-ho-so>
          </ng-container>
          <ng-container *ngIf="activeTabId === tabs.KhaoSatHienTruong && congVanYeuCau">
            <app-khao-sat-hien-truong [congVanYeuCau]="congVanYeuCau" (reloadForm)="reloadForm($event)"></app-khao-sat-hien-truong>
          </ng-container>
          <ng-container *ngIf="activeTabId === tabs.DuThaoThoaThuan && congVanYeuCau">
            <app-du-thao-dau-noi [congVanYeuCau]="congVanYeuCau" (reloadForm)="reloadForm($event)"></app-du-thao-dau-noi>
          </ng-container>          
          <ng-container *ngIf="activeTabId === tabs.ChuyenTiep && congVanYeuCau">
            <app-hoan-thanh [congVanYeuCau]="congVanYeuCau"></app-hoan-thanh>
          </ng-container>
        </div>
      </div>
    </div>
  </div>
</ng-template>